<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <script>
      window.__CP_DEBUG = {{ CP_DEBUG|tojson }};
      if (!window.__CP_DEBUG) { try { console.debug = function(){} } catch(e){} }
    </script>
    <title>Puzzle</title>
    <link href="/static/vendor/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/static/vendor/chessboard-1.0.0.min.css" />
  <link rel="stylesheet" href="/static/css/site.css" />
    <style>
      /* Kept minimal here; responsive rules live in static/css/site.css */
      .square-55d63 { transition: background 0.2s }
    </style>
  </head>
  <body class="p-4">
    {% include '_ribbon.html' %}

    <div class="container py-4">
  <h1 class="h4 mb-3">Puzzle</h1>
      <div class="row">
        <!-- Keep DOM order: board first, controls second. Use Bootstrap order classes
             so on medium+ screens controls appear to the right, and on small screens
             they stack below the board. This improves accessibility and mobile
             layout so the board can take maximum horizontal space in portrait. -->
        <div class="col-md-6 order-1 order-md-1">
          <div id="board"></div>
        </div>
        <div class="col-md-6 order-2 order-md-2 mt-3 mt-md-0">
          <div id="info" class="mb-3"></div>
          <div id="puzzleMeta" class="text-muted mb-3"></div>
          <div class="d-flex flex-wrap gap-2">
            <button id="hint" class="btn btn-outline-secondary">Hint</button>
            <button id="next" class="btn btn-primary" disabled>Next</button>
          </div>
        </div>
      </div>
    </div>

    <!-- badge modal removed; toasts used for badge notifications -->
    <!-- Toast container for inline toasts (badges, XP increments) -->
    <div aria-live="polite" aria-atomic="true" class="position-fixed top-0 end-0 p-3" style="z-index: 1080;">
      <div id="toastContainer"></div>
    </div>
  <script src="/static/vendor/jquery-3.6.0.min.js"></script>
  <script>window.jQuery = window.jQuery || window.$; window.$ = window.$ || window.jQuery;</script>
  <script src="/static/vendor/chess.min.js"></script>
  <script src="/static/vendor/chessboard-1.0.0.min.js"></script>
  <script src="/static/vendor/bootstrap.bundle.min.js"></script>
  <script src="/static/js/ribbon.js"></script>
  <script>window.addEventListener('DOMContentLoaded', ()=>{ if (window.initRibbon) window.initRibbon() })</script>
    <script src="/static/js/puzzle.js?v=7"></script>
  </body>
</html>
